use ponos_rs::ponos::Ponos;

// Тесты для super

#[test]
fn test_super_method_call() {
    let source = r#"
        класс Животное
            конструктор()
            конец

            функ говорить(): строка
                возврат "Животное говорит";
            конец
        конец

        класс Собака наследует Животное
            конструктор()
            конец

            функ говорить(): строка
                возврат super.говорить();
            конец
        конец

        пер собака = Собака();
        пер речь = собака.говорить();
    "#;

    let mut ponos = Ponos::new();
    ponos.run_source(source.to_string());
}

#[test]
fn test_super_in_override() {
    let source = r#"
        класс Базовый
            значение: число

            конструктор(val: число)
                это.значение = val;
            конец

            функ получить(): число
                возврат это.значение;
            конец
        конец

        класс Расширенный наследует Базовый
            конструктор(val: число)
                это.значение = val;
            конец

            функ получить(): число
                возврат super.получить();
            конец
        конец

        пер obj = Расширенный(42);
        пер результат = obj.получить();
    "#;

    let mut ponos = Ponos::new();
    ponos.run_source(source.to_string());
}
