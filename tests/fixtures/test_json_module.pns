использовать "стд/json" как json;

вывести("=== Тест JSON модуля ===");

пер строка = "{\"имя\": \"Ponos\", \"флаг\": true, \"значения\": [1, 2, 3], \"вложенный\": {\"ключ\": \"знач\"}}";
пер данные = json.десериализовать(строка);

если данные["имя"] != "Ponos"
    исключение "Неверное строковое значение";
конец

если данные["флаг"] != истина
    исключение "Неверное булевое значение";
конец

пер массив = данные["значения"];
если длина(массив) != 3
    исключение "Неверная длина массива";
конец

пер вложенный = данные["вложенный"];
если вложенный["ключ"] != "знач"
    исключение "Неверное значение во вложенном словаре";
конец

пер конструктор = {
    "число": 42,
    "логический": ложь,
    "массив": [1, 2, 3]
};

пер как_строка = json.сериализовать(конструктор);
пер проверка = json.десериализовать(как_строка);

если проверка["число"] != 42
    исключение "Число не сохранилось после сериализации";
конец

если проверка["логический"] != ложь
    исключение "Булево не сохранилось после сериализации";
конец

пер проверка_массив = проверка["массив"];
если длина(проверка_массив) != 3
    исключение "Массив не сохранился после сериализации";
конец

вывести("=== Все тесты JSON прошли ===");
